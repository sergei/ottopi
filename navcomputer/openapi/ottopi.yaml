openapi: 3.0.0

servers:
  - description: localhost
    url: http://localhost:5555/ottopi

info:
  description: APIs to interact with Otto Pi
  version: "1.0.0"
  title: Otto Pi API
  contact:
    email: spodshivalov@gmail.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'

tags:
  - name: nav
    description: Navigation control REST APIs
  - name: web
    description: Paths to acess the builtin Web application

paths:
########################################################################################################################
#  Static web page hosting REACT app
########################################################################################################################
  /web:
    get:
      operationId: rest_api.root_page
      tags:
        - web
      summary: Serves index.html of React app
      description: Serves index.html of React app
      responses:
        '200':
          description: Successfully loaded html page.
          content:
            text/html:   # Add the media type here
              schema:
                type: string

########################################################################################################################
#  Static web page hosting REACT app
########################################################################################################################
  /web/{name}:
    get:
      operationId: rest_api.static_page
      tags:
        - web
      summary: Serves React app
      description: Serves React app
      parameters:
        - in: path
          name: name
          schema:
            type: string
            format: path
          required: false
          description: url path
      responses:
        '200':
          description: Successfully loaded html page.
          content:
            text/html:   # Add the media type here
              schema:
                type: string

########################################################################################################################
#  /navigation
########################################################################################################################
  /nav:
    get:
      operationId: rest_api.get_raw_instr
      tags:
        - nav
      summary: Get raw instrument data
      description: Get raw instrument data
      responses:
        '200':
          description: Raw instrument data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RawInstrData'

  /polars:
    post:
      operationId: rest_api.polars_upload
      tags:
        - nav
      summary: Uplaod file containing polras data
      description: Uplaod file containing polras data
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                fileName:
                  type: string
                  format: binary
      responses:
        '200':
          description: Successfully loaded html page.
          content:
            text/html:   # Add the media type here
              schema:
                type: string


  /gpx:
    post:
      operationId: rest_api.gpx_upload
      tags:
        - nav
      summary: Uplaod GPX file containing routes and waypoints
      description:  Uplaod GPX file containing routes and waypoints
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                fileName:
                  type: string
                  format: binary
      responses:
        '200':
          description: Successfully loaded html page.
          content:
            text/html:   # Add the media type here
              schema:
                type: string


########################################################################################################################
# Components
########################################################################################################################
components:
  schemas:

    WayPoints:
      type: object
      required:
        - wpts
      properties:
        wpts:
          description: List of waypoints
          type: array
          items:
            $ref: '#/components/schemas/Waypoint'

    Waypoint:
      description: Waypoint
      type: object
      required:
        - name
        - latitude
        - longitude
      properties:
        name:
          description: Waypoint name
          type: string
        latitude:
          description: Degrees of latitude
          minimum: -90
          maximum: 90
          type: number
        longitude:
          description: Degrees of longitude
          minimum: -180
          maximum: 180
          type: number

    RawInstrData:
      description: Raw Instruments Data
      type: object
      required:
        - utc
      properties:
        utc:
          description: UTC time stamp
          type: string
        awa:
          description: Apparent Wind Angle (degrees)
          minimum: -180
          maximum: 180
          type: number
        aws:
          description: Apparent Wind Speed (knots)
          minimum: 0
          maximum: 100
          type: number
